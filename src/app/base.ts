const dict256 = [
    '斤',
    '谊',
    '蛛',
    '菌',
    '侯',
    '综',
    '陕',
    '哩',
    '昆',
    '贡',
    '僚',
    '谐',
    '陵',
    '芦',
    '阁',
    '炒',
    '廷',
    '腐',
    '祝',
    '砂',
    '蔡',
    '胚',
    '袁',
    '瞎',
    '蝠',
    '揭',
    '虹',
    '辽',
    '厦',
    '郑',
    '氨',
    '鹊',
    '朗',
    '晒',
    '绣',
    '螺',
    '朽',
    '京',
    '雁',
    '蟹',
    '枣',
    '牡',
    '疆',
    '旱',
    '寿',
    '赴',
    '曰',
    '岸',
    '蚂',
    '田',
    '肝',
    '垄',
    '霍',
    '滤',
    '杉',
    '祥',
    '藻',
    '堤',
    '逢',
    '娶',
    '萍',
    '翁',
    '拐',
    '羚',
    '氢',
    '掘',
    '贩',
    '刊',
    '硫',
    '蒜',
    '账',
    '盐',
    '蚓',
    '惠',
    '叭',
    '顽',
    '遣',
    '禽',
    '筹',
    '抄',
    '卢',
    '湖',
    '蒋',
    '逮',
    '坝',
    '嚷',
    '锅',
    '返',
    '债',
    '瞅',
    '役',
    '盾',
    '析',
    '辐',
    '薯',
    '娱',
    '炕',
    '衔',
    '曹',
    '惟',
    '铅',
    '箭',
    '俄',
    '骄',
    '遂',
    '昌',
    '淀',
    '熙',
    '券',
    '翔',
    '访',
    '烤',
    '舱',
    '宪',
    '癌',
    '煮',
    '皆',
    '捷',
    '浦',
    '噪',
    '削',
    '绩',
    '症',
    '寺',
    '浙',
    '愁',
    '牺',
    '函',
    '纺',
    '霉',
    '履',
    '兆',
    '阐',
    '参',
    '孵',
    '谈',
    '著',
    '棕',
    '钾',
    '杭',
    '葫',
    '穗',
    '棵',
    '辩',
    '寄',
    '氯',
    '翠',
    '豹',
    '邓',
    '饲',
    '亩',
    '妨',
    '矛',
    '撤',
    '孝',
    '燕',
    '毅',
    '纲',
    '倡',
    '硝',
    '柄',
    '拱',
    '坡',
    '砌',
    '碱',
    '贺',
    '颁',
    '滨',
    '益',
    '碳',
    '嘉',
    '芝',
    '砍',
    '葵',
    '栽',
    '盟',
    '穆',
    '轴',
    '纬',
    '盲',
    '庙',
    '栖',
    '抒',
    '蝇',
    '瓢',
    '叙',
    '矿',
    '督',
    '裕',
    '铝',
    '贾',
    '坟',
    '邮',
    '婶',
    '霜',
    '郭',
    '赢',
    '贮',
    '祸',
    '稿',
    '钠',
    '伍',
    '醇',
    '啼',
    '诊',
    '莲',
    '岗',
    '届',
    '磁',
    '媳',
    '桦',
    '舅',
    '巩',
    '劫',
    '贸',
    '竞',
    '坊',
    '钙',
    '泰',
    '虾',
    '孟',
    '矣',
    '傍',
    '谦',
    '鉴',
    '艘',
    '迁',
    '拓',
    '俺',
    '吨',
    '屠',
    '姜',
    '蔬',
    '篮',
    '捞',
    '淮',
    '塘',
    '稼',
    '鳄',
    '葬',
    '媒',
    '尸',
    '桂',
    '枢',
    '僧',
    '煌',
    '笋',
    '蜡',
    '氮',
    '柏',
    '旨',
    '唱',
    '澳',
    '庆',
    '辖',
    '谋',
]

const rdict256 = new Map<string, number>()
for (let i = 0; i < 256; i++) rdict256.set(dict256[i], i)

const dict64 = [
    'a',
    'b',
    'c',
    'd',
    'e',
    'f',
    'g',
    'h',
    'i',
    'j',
    'k',
    'l',
    'm',
    'n',
    'o',
    'p',
    'q',
    'r',
    's',
    't',
    'u',
    'v',
    'w',
    'x',
    'y',
    'z',
    'A',
    'B',
    'C',
    'D',
    'E',
    'F',
    'G',
    'H',
    'I',
    'J',
    'K',
    'L',
    'M',
    'N',
    'O',
    'P',
    'Q',
    'R',
    'S',
    'T',
    'U',
    'V',
    'W',
    'X',
    'Y',
    'Z',
    '1',
    '2',
    '3',
    '4',
    '5',
    '6',
    '7',
    '8',
    '9',
    '0',
    '.',
    '-'
]

const rdict64 = new Map<string, number>()
for (let i = 0; i < 64; i++) rdict64.set(dict64[i], i)

export function encode64to256(input: string) {
    let output = ''
    for (let i = 0; i < input.length; i += 4) {
        const c1 = rdict64.get(input[i])!
        const c2 = rdict64.get(input[i + 1] ?? '-')!
        const c3 = rdict64.get(input[i + 2] ?? '-')!
        const c4 = rdict64.get(input[i + 3] ?? '-')!
        output += dict256[(c1 << 2) | (c2 >> 4)]
        output += dict256[((c2 & 0xf) << 4) | (c3 >> 2)]
        output += dict256[((c3 & 0x3) << 6) | c4]
    }
    return output
}

export function decode256to64(input: string) {
    let output = ''
    for (let i = 0; i < input.length; i += 3) {
        const b1 = rdict256.get(input[i])!
        const b2 = rdict256.get(input[i + 1])!
        const b3 = rdict256.get(input[i + 2])!
        output += dict64[b1 >> 2]
        output += dict64[((b1 & 0x3) << 4) | (b2 >> 4)]
        output += dict64[((b2 & 0xf) << 2) | (b3 >> 6)]
        output += dict64[b3 & 0x3f]
    }
    return output.replace(/-/g, '')
}

// const test = 'HelloWorld123.FuckYou456'
// console.log(decode256to64(encode64to256(test)) === test)